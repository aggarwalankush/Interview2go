<font color="#f92672">package</font> <font color="#f8f8f2">XBonus</font><font color="#f92672">;</font><br/><br/><font color="#f92672">import</font> <font color="#f8f8f2">java.util.HashMap</font><font color="#f92672">;</font><br/><br/><font color="#75715e">/**</font><br/><font color="#75715e">&nbsp;&nbsp;*&nbsp;&nbsp;Design&nbsp;&nbsp;and&nbsp;&nbsp;implement&nbsp;&nbsp;a&nbsp;&nbsp;data&nbsp;&nbsp;structure&nbsp;&nbsp;for&nbsp;&nbsp;Least&nbsp;&nbsp;Recently&nbsp;&nbsp;Used&nbsp;&nbsp;(LRU)&nbsp;&nbsp;cache.</font><br/><font color="#75715e">&nbsp;&nbsp;*&nbsp;&nbsp;It&nbsp;&nbsp;should&nbsp;&nbsp;support&nbsp;&nbsp;the&nbsp;&nbsp;following&nbsp;&nbsp;operations:&nbsp;&nbsp;get&nbsp;&nbsp;and&nbsp;&nbsp;set.</font><br/><font color="#75715e">&nbsp;&nbsp;*/</font><br/><font color="#66d9ef">public</font> <font color="#66d9ef">class</font> <font color="#a6e22e">LRUCache</font> <font color="#f92672">{</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">int</font> <font color="#f8f8f2">capacity</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">HashMap</font><font color="#f92672">&lt;</font><font color="#f8f8f2">Integer</font><font color="#f92672">,</font> <font color="#f8f8f2">Node</font><font color="#f92672">&gt;</font> <font color="#f8f8f2">map</font> <font color="#f92672">=</font> <font color="#66d9ef">new</font> <font color="#f8f8f2">HashMap</font><font color="#f92672">&lt;&gt;();</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">head</font> <font color="#f92672">=</font> <font color="#66d9ef">null</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">end</font> <font color="#f92672">=</font> <font color="#66d9ef">null</font><font color="#f92672">;</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">public</font> <font color="#a6e22e">LRUCache</font><font color="#f92672">(</font><font color="#66d9ef">int</font> <font color="#f8f8f2">capacity</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">this</font><font color="#f92672">.</font><font color="#a6e22e">capacity</font> <font color="#f92672">=</font> <font color="#f8f8f2">capacity</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">public</font> <font color="#66d9ef">int</font> <font color="#a6e22e">get</font><font color="#f92672">(</font><font color="#66d9ef">int</font> <font color="#f8f8f2">key</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">containsKey</font><font color="#f92672">(</font><font color="#f8f8f2">key</font><font color="#f92672">))</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">n</font> <font color="#f92672">=</font> <font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">get</font><font color="#f92672">(</font><font color="#f8f8f2">key</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">remove</font><font color="#f92672">(</font><font color="#f8f8f2">n</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">setHead</font><font color="#f92672">(</font><font color="#f8f8f2">n</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">return</font> <font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">value</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">return</font> <font color="#f92672">-</font><font color="#ae81ff">1</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">public</font> <font color="#66d9ef">void</font> <font color="#a6e22e">remove</font><font color="#f92672">(</font><font color="#f8f8f2">Node</font> <font color="#f8f8f2">n</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">pre</font> <font color="#f92672">!=</font> <font color="#66d9ef">null</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">pre</font><font color="#f92672">.</font><font color="#a6e22e">next</font> <font color="#f92672">=</font> <font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">next</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font> <font color="#66d9ef">else</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">head</font> <font color="#f92672">=</font> <font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">next</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">next</font> <font color="#f92672">!=</font> <font color="#66d9ef">null</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">next</font><font color="#f92672">.</font><font color="#a6e22e">pre</font> <font color="#f92672">=</font> <font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">pre</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font> <font color="#66d9ef">else</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">end</font> <font color="#f92672">=</font> <font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">pre</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">public</font> <font color="#66d9ef">void</font> <font color="#a6e22e">setHead</font><font color="#f92672">(</font><font color="#f8f8f2">Node</font> <font color="#f8f8f2">n</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">next</font> <font color="#f92672">=</font> <font color="#f8f8f2">head</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">n</font><font color="#f92672">.</font><font color="#a6e22e">pre</font> <font color="#f92672">=</font> <font color="#66d9ef">null</font><font color="#f92672">;</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">head</font> <font color="#f92672">!=</font> <font color="#66d9ef">null</font><font color="#f92672">)</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">head</font><font color="#f92672">.</font><font color="#a6e22e">pre</font> <font color="#f92672">=</font> <font color="#f8f8f2">n</font><font color="#f92672">;</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">head</font> <font color="#f92672">=</font> <font color="#f8f8f2">n</font><font color="#f92672">;</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">end</font> <font color="#f92672">==</font> <font color="#66d9ef">null</font><font color="#f92672">)</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">end</font> <font color="#f92672">=</font> <font color="#f8f8f2">head</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">public</font> <font color="#66d9ef">void</font> <font color="#a6e22e">set</font><font color="#f92672">(</font><font color="#66d9ef">int</font> <font color="#f8f8f2">key</font><font color="#f92672">,</font> <font color="#66d9ef">int</font> <font color="#f8f8f2">value</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">containsKey</font><font color="#f92672">(</font><font color="#f8f8f2">key</font><font color="#f92672">))</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">old</font> <font color="#f92672">=</font> <font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">get</font><font color="#f92672">(</font><font color="#f8f8f2">key</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">old</font><font color="#f92672">.</font><font color="#a6e22e">value</font> <font color="#f92672">=</font> <font color="#f8f8f2">value</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">remove</font><font color="#f92672">(</font><font color="#f8f8f2">old</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">setHead</font><font color="#f92672">(</font><font color="#f8f8f2">old</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font> <font color="#66d9ef">else</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">created</font> <font color="#f92672">=</font> <font color="#66d9ef">new</font> <font color="#f8f8f2">Node</font><font color="#f92672">(</font><font color="#f8f8f2">key</font><font color="#f92672">,</font> <font color="#f8f8f2">value</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">if</font> <font color="#f92672">(</font><font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">size</font><font color="#f92672">()</font> <font color="#f92672">&gt;=</font> <font color="#f8f8f2">capacity</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">remove</font><font color="#f92672">(</font><font color="#f8f8f2">end</font><font color="#f92672">.</font><font color="#a6e22e">key</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">remove</font><font color="#f92672">(</font><font color="#f8f8f2">end</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">setHead</font><font color="#f92672">(</font><font color="#f8f8f2">created</font><font color="#f92672">);</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font> <font color="#66d9ef">else</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">setHead</font><font color="#f92672">(</font><font color="#f8f8f2">created</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">map</font><font color="#f92672">.</font><font color="#a6e22e">put</font><font color="#f92672">(</font><font color="#f8f8f2">key</font><font color="#f92672">,</font> <font color="#f8f8f2">created</font><font color="#f92672">);</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><font color="#f92672">}</font><br/><br/><font color="#66d9ef">class</font> <font color="#a6e22e">Node</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">int</font> <font color="#f8f8f2">key</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">int</font> <font color="#f8f8f2">value</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">pre</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f8f8f2">Node</font> <font color="#f8f8f2">next</font><font color="#f92672">;</font><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">public</font> <font color="#a6e22e">Node</font><font color="#f92672">(</font><font color="#66d9ef">int</font> <font color="#f8f8f2">key</font><font color="#f92672">,</font> <font color="#66d9ef">int</font> <font color="#f8f8f2">value</font><font color="#f92672">)</font> <font color="#f92672">{</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">this</font><font color="#f92672">.</font><font color="#a6e22e">key</font> <font color="#f92672">=</font> <font color="#f8f8f2">key</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#66d9ef">this</font><font color="#f92672">.</font><font color="#a6e22e">value</font> <font color="#f92672">=</font> <font color="#f8f8f2">value</font><font color="#f92672">;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#f92672">}</font><br/><font color="#f92672">}</font><br/>